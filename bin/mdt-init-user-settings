#!/usr/bin/env python
# PYTHON_ARGCOMPLETE_OK
import argparse
import textwrap
import argcomplete
import mdt
import mdt.shell_utils

__author__ = 'Robbert Harms'
__date__ = "2015-08-18"
__maintainer__ = "Robbert Harms"
__email__ = "robbert.harms@maastrichtuniversity.nl"


if __name__ == '__main__':
    def get_arg_parser():
        description = textwrap.dedent("""
            This script is meant to update your home folder with the latest MDT models.
        """)
        description += mdt.shell_utils.get_citation_message()

        parser = argparse.ArgumentParser(description=description, formatter_class=argparse.RawTextHelpFormatter)

        parser.add_argument('--pass-if-exists', dest='pass_if_exists', action='store_true',
                            help="do nothing if the config dir exists (default)")
        parser.add_argument('--always-overwrite', dest='pass_if_exists', action='store_false',
                            help="always overwrite the config directory with the default settings")
        parser.set_defaults(pass_if_exists=False)

        parser.add_argument('--keep-config', dest='keep_config', action='store_true',
                            help="keep the user's config if present (default)")
        parser.add_argument('--overwrite-config', dest='keep_config', action='store_false',
                            help="overwrite the config with the default config file")
        parser.set_defaults(keep_config=False)

        return parser

    parser = get_arg_parser()
    argcomplete.autocomplete(parser)
    args = parser.parse_args()

    mdt.initialize_user_settings(pass_if_exists=args.pass_if_exists,
                                 keep_config=args.keep_config)
